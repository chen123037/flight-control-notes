# 综合调参飞行指南（SITL）

适用航线：`../06-实践记录/SITL/20260129.waypoints`

目标：在同一条航线上完成“基线 + 3 次单参实验”，产出可复现实验记录。

---

## 1. 准备与基线

1. 载入航线并确认 `AUTO` 可正常执行。
2. 备份参数（已有 `pid_backup.param` 可复用）。
3. Tuning 勾选曲线：
   - `roll` / `nav_roll`
   - `alt` / `targetalt`
   - `airspeed` / `groundspeed`
   - `pitch`
   - `throttle` 或 `throttle_out`
4. 飞一趟“基线”，截图并记录基线表现。

---

## 2. 实验 1（导航类）

只改 1 个参数，二选一：
- `NAVL1_PERIOD`（如 15 → 10 或 20）
- `NAVL1_DAMPING`（如 0.75 → 0.6 或 0.9）

记录要点：
- 转弯半径是否变化
- 是否过冲/振荡
- 轨迹是否更紧或更平滑

**已有记录（导航实验：NAVL1_PERIOD=20）**：
- 盘旋1：roll 34.69~39.93（均值 36.5）；nav_roll 34.79~39.85（均值 36.46）；
  groundspeed 23.29~23.42（均值 23.36）；airspeed 21.92~22.08（均值 21.99）；
  wp_dist 104~107（均值 106.13）
- 盘旋2：roll 35.71~36.03（均值 35.85）；nav_roll 35.8~36.08（均值 35.96）；
  groundspeed 23.33~23.38（均值 23.36）；airspeed 21.93~22.04（均值 21.99）；
  wp_dist 103~103（均值 103）
- 转弯1：roll -52.46~0.28（均值 -22.78）；nav_roll -49.78~0.3（均值 -25.26）；
  groundspeed 23.37~24.51（均值 23.75）；airspeed 21.97~23.08（均值 22.36）；
  wp_dist 55~854（均值 484.28）
- 转弯2：roll -39.27~0.11（均值 -14.73）；nav_roll -34.62~0.08（均值 -15.5）；
  groundspeed 23.29~23.76（均值 23.45）；airspeed 21.94~22.33（均值 22.08）；
  wp_dist 28~1299（均值 805.19）

```
实验序号：实验 1（导航类）
参数名：NAVL1_PERIOD
修改前值：15
修改后值：20
飞行表现：盘旋段更平滑，转弯滚转幅度偏小，轨迹更稳但转弯半径偏大
截图编号：沿用导航实验记录截图
```

---

## 3. 实验 2（TECS 类）

只改 1 个参数，二选一：
- `TECS_CLMB_MAX`（如 5 → 2 或 8）
- `TECS_TIME_CONST`（如 5 → 10 或 3）

记录要点：
- 爬升/下降速度变化
- 高度跟随是否滞后或超调
- 俯仰是否出现抖动

**已有记录（TECS 实验：TECS_CLMB_MAX=2）**：
- 现象：爬升1-A climbrate 均值 0.43；爬升2-A climbrate 均值 0.49；
  到达高度-A alt 均值 78.22（targetalt 均值 78.66）
- 结论：爬升速度偏慢，目标高度略滞后

```
实验序号：实验 2（TECS 类）
参数名：TECS_CLMB_MAX
修改前值：5
修改后值：2
飞行表现：爬升速度偏慢，到达高度略滞后
截图编号：对应参数一A-*
```

---

## 4. 实验 3（安全类）

只改 1 个参数，二选一：
- `RTL_ALTITUDE`（如 100 → 80）
- `FENCE_ENABLE=1` 并触发一次围栏

记录要点：
- 触发条件
- 模式变化（例如进入 RTL）
- 告警提示与 `alt/targetalt` 变化

**已有记录（安全实验：RTL_ALTITUDE=80）**：
- 说明：默认值 100，无告警。不同固件参数名可能为 `RTL_ALT` 或 `RTL_ALTITUDE`。
- `targetalt` 80~80（均值 80）；`alt` 79.85~79.97（均值 79.91）
- `groundspeed` 23.43~23.57（均值 23.51）；`airspeed` 21.96~22.08（均值 22.03）
- 结论：RTL 返航高度随 `RTL_ALT` 改为 80，盘旋高度稳定贴近 80 m，速度稳定。

```
实验序号：实验 3（安全类）
参数名：RTL_ALTITUDE
修改前值：100
修改后值：80
飞行表现：返航盘旋高度稳定贴近 80 m，速度稳定
截图编号：RTL_ALTITUDE=80 盘旋段
```

---

## 5. 记录模板（每次实验必填）

```
实验序号：
参数名：
修改前值：
修改后值：
飞行表现：
截图编号：
```

---

## 6. 注意事项

- 单次只改一个参数，避免耦合干扰
- 每次实验结束可恢复基线或明确记录新值
- 至少完成 3 次实验记录，满足周五产出要求
