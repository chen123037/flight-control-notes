# ArduPlane 核心参数速查表

> 第 2 周学习产出
> 创建日期：2026-01-26
> 更新日期：2026-01-30

---

## 1. PID 控制参数

### 1.1 滚转控制 (RLL2SRV_)

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `RLL2SRV_P` | 滚转比例增益 | 0.3（对应 `RLL_RATE_P`） | 增大更灵敏易超调，减小更迟钝 | 基线 0.3；实验 0.08/0.4 |
| `RLL2SRV_I` | 滚转积分增益 | 0.25（对应 `RLL_RATE_I`） | 增大消除稳态误差但易慢振 | 基线 0.25；实验 0/0.25 |
| `RLL2SRV_D` | 滚转微分增益 | 0.01743（对应 `RLL_RATE_D`） | 增大阻尼抑制过冲，过大会发抖 | 基线 0.01743；实验 0/0.025 |
| `RLL2SRV_IMAX` | 滚转积分上限 | 0.666（对应 `RLL_RATE_IMAX`） | 限制积分饱和，过小难消差 | 基线 0.666 |
| `RLL2SRV_FF` | 滚转前馈增益 | 0.237212（对应 `RLL_RATE_FF`） | 增大前馈响应更快，过大易突兀 | 基线 0.237212 |

**理解笔记**：
- P 提供恢复力矩，决定响应速度与超调趋势
- I 消除长期偏差，过大可能引入慢振
- D 提供阻尼，抑制过冲与抖动

---

### 1.2 俯仰控制 (PTCH2SRV_)

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `PTCH2SRV_P` | 俯仰比例增益 | 0.15（对应 `PTCH_RATE_P`） | 增大抬头更有力但易超调 | 基线 0.15；实验 0.04 |
| `PTCH2SRV_I` | 俯仰积分增益 | 0.11（对应 `PTCH_RATE_I`） | 消除高度误差，过大易慢振 | 基线 0.11 |
| `PTCH2SRV_D` | 俯仰微分增益 | 0.007265（对应 `PTCH_RATE_D`） | 增大阻尼更平滑，过大易抖 | 基线 0.007265 |
| `PTCH2SRV_IMAX` | 俯仰积分上限 | 0.666（对应 `PTCH_RATE_IMAX`） | 约束积分，防止饱和 | 基线 0.666 |
| `PTCH2SRV_FF` | 俯仰前馈增益 | 0.595723（对应 `PTCH_RATE_FF`） | 增大前馈响应更快 | 基线 0.595723 |

**理解笔记**：
- 俯仰受重力影响更明显，抬头响应通常慢于低头
- P 过小会导致抬头无力、跟随滞后


---

### 1.3 偏航控制 (YAW2SRV_)

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `YAW2SRV_SLIP` | 侧滑角控制 | 0 | 增大抑制侧滑，过大可能振荡 | 基线 0 |
| `YAW2SRV_INT` | 偏航积分 | 0 | 多数机型可保持较小或为 0 | 基线 0 |
| `YAW2SRV_DAMP` | 偏航阻尼 | 0 | 增大抑制机头摆动 | 基线 0 |

**理解笔记**：
- 偏航主要用于协调转弯与侧滑修正
- 本系统关键前馈为 `YAW2SRV_RLL=1`（实验曾设 0）
- 过大阻尼或积分会导致响应迟钝


---

## 2. TECS 参数（纵向控制）

### 2.1 爬升/下降控制

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `TECS_CLMB_MAX` | 最大爬升率 (m/s) | 5 | | 基线 5；实验 2/8 |
| `TECS_SINK_MIN` | 最小下降率 (m/s) | 2 | | 基线 2 |
| `TECS_SINK_MAX` | 最大下降率 (m/s) | 5 | | 基线 5；实验 2/8 |
| `TECS_TIME_CONST` | 时间常数 (s) | 5 | | 基线 5；实验 10/3 |
| `TECS_PITCH_MAX` | 最大俯仰角 (°) | 15 | | 基线 15 |
| `TECS_PITCH_MIN` | 最小俯仰角 (°) | 0 | | 基线 0 |

**TECS 原理简述**：
- TECS = Total Energy Control System（总能量控制系统）
- 高度=势能，空速=动能，俯仰管空速趋势，油门管总能量


---

### 2.2 空速控制

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `ARSPD_FBW_MIN` | FBW 最小空速 | 10（`AIRSPEED_MIN`） | 过小易失速，过大易偏快 | 基线 10 |
| `ARSPD_FBW_MAX` | FBW 最大空速 | 30（`AIRSPEED_MAX`） | 过小限制速度，过大需关注结构 | 基线 30 |
| `TRIM_ARSPD_CM` | 巡航空速 (cm/s) | 22 m/s（`AIRSPEED_CRUISE`） | 依据机型巡航需求设定 | 基线 22 m/s |
| `TRIM_THROTTLE` | 巡航油门 (%) | 50 | 依据机型巡航功率设定 | 基线 50 |

**理解笔记**：
- 速度限制主要用于安全边界，不是调性能


---

## 3. 导航参数

### 3.1 L1 控制器

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `NAVL1_PERIOD` | L1 周期 (s) | 15 | | 基线 15；实验 10/20 |
| `NAVL1_DAMPING` | L1 阻尼 | 0.75 | | 基线 0.75；实验 0.6/0.9 |

**L1 控制器原理**：
- L1 周期越小：转弯更紧但更容易过冲
- L1 周期越大：转弯更平滑但跟随变慢
- L1 阻尼越大：更平滑；越小：更敏捷但易振荡

---

### 3.2 航点参数

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `WP_RADIUS` | 航点到达半径 (m) | 50 | 变大更早切航段，变小更贴近 | 基线 50；实验 80 |
| `WP_LOITER_RAD` | 盘旋半径 (m) | 80 | 变小盘旋更紧，变大更平滑 | 基线 80；实验 50/100 |
| `LIM_ROLL_CD` | 最大滚转角 (centidegrees) | 6500（`ROLL_LIMIT_DEG=65`） | | 基线 6500；实验 4500 |

**理解笔记**：
- `LIM_ROLL_CD` 变小会限制转弯能力，半径变大


---

## 4. 安全与限制

### 4.1 飞行限制

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `LIM_PITCH_MAX` | 最大俯仰角 (centidegrees) | 25°（`PTCH_LIM_MAX_DEG`） | 限制抬头角，避免过大 | 基线 25 |
| `LIM_PITCH_MIN` | 最小俯仰角 (centidegrees) | -20°（`PTCH_LIM_MIN_DEG`） | 限制俯冲角，避免过大 | 基线 -20 |
| `ALT_HOLD_RTL` | RTL 盘旋高度 (m) | 100（`RTL_ALTITUDE`） | 改大返航高度升高，改小降低 | 基线 100；实验 80 |

---

### 4.2 故障保护

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `FS_SHORT_ACTN` | 短时失控动作 | 0 | 依据风险选择动作（常见 RTL） | 基线 0 |
| `FS_LONG_ACTN` | 长时失控动作 | 0 | 长时失控可选 RTL/降落等 | 基线 0 |
| `FS_SHORT_TIMEOUT` | 短时失控超时 (s) | 未找到（当前固件缺失） | | |
| `FS_LONG_TIMEOUT` | 长时失控超时 (s) | 5 | | 基线 5 |

**失控动作选项**：
- 0 = 无动作
- 1 = RTL
- 2 = FBWA 滑翔
- 3 = 自动着陆

---

### 4.3 解锁检查

| 参数名 | 作用 | 默认值 | 调整建议 | 我的设置 |
|--------|------|--------|----------|----------|
| `ARMING_CHECK` | 解锁检查项位掩码 | 未找到（使用 `ARMING_*`） | 1=全部检查，0=跳过（危险） | ARMING_REQUIRE=1；SKIPCHK=0 |
| `FENCE_ENABLE` | 围栏使能 | 0 | 1=开启围栏保护 | 基线 0；实验 1 |
| `FENCE_ACTION` | 围栏触发动作 | 1 | 触发后动作（常见 RTL） | 基线 1 |

**ARMING_CHECK 位说明**：
- 1 = 全部检查
- 0 = 跳过所有检查（危险！）

---

## 附录：调参经验总结

### A. 参数修改原则

1. 先备份参数，先飞基线作为对照
2. 单次只改 1 个参数，做 A/B 对照并记录曲线
3. 实验结束恢复备份，截图与日志归档

### B. 常见问题与参数

| 问题现象 | 可能相关参数 | 调整方向 |
|----------|--------------|----------|
| 滚转响应慢 | `RLL2SRV_P` | 增大 |
| 过冲或振荡 | `RLL2SRV_D` / `NAVL1_DAMPING` | 适当增大阻尼 |
| 抬头无力/高度滞后 | `PTCH2SRV_P` / `TECS_TIME_CONST` | 增大 P 或减小 TIME_CONST |
| 爬升慢 | `TECS_CLMB_MAX` | 适度增大 |
| 下降慢 | `TECS_SINK_MAX` | 适度增大 |
| 转弯过早/过迟 | `WP_RADIUS` | 变小更贴近/变大更早切 |
| 盘旋半径过大 | `WP_LOITER_RAD` / `LIM_ROLL_CD` | 减小半径或放宽滚转 |
| RTL 高度不变 | `ALT_HOLD_RTL` / `RTL_ALTITUDE` | 确认已触发 RTL |
| 围栏无反应 | `FENCE_ENABLE` / `FENCE_ACTION` | 开启围栏并检查类型 |
| 无法解锁 | `ARMING_*` | 查看提示逐项排查 |

### C. 我的调参记录汇总

| 日期 | 参数 | 修改前 | 修改后 | 效果 |
|------|------|--------|--------|------|
| 2026-01-27 | `TECS_CLMB_MAX` | 5 | 2 / 8 | 爬升更慢 / 更快 |
| 2026-01-27 | `TECS_SINK_MAX` | 5 | 2 / 8 | 下降更慢 / 更快 |
| 2026-01-27 | `TECS_TIME_CONST` | 5 | 10 / 3 | 更平滑 / 更快 |
| — | `NAVL1_PERIOD` | 15 | 10 / 20 | 转弯更紧 / 更平滑 |
| — | `NAVL1_DAMPING` | 0.75 | 0.6 / 0.9 | 更敏捷 / 更平滑 |
| — | `WP_LOITER_RAD` | 80 | 50 / 100 | 盘旋更紧 / 更松 |
| — | `WP_RADIUS` | 50 | 80 | 更早切航段 |
| — | `ROLL_LIMIT_DEG` | 65 | 45 | 转弯更保守 |
| — | `RTL_ALTITUDE` | 100 | 80 | 返航高度降低 |
| — | `FENCE_ENABLE` | 0 | 1 | 越界触发 RTL |

---

*核心参数速查表 - 已更新至 2026-01-30*
