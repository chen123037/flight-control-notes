# 飞控系统概述

## 什么是飞控

飞控（Flight Controller）是无人机的"大脑"，负责：
- 读取传感器数据（IMU、气压计、GPS等）
- 计算飞机当前姿态和位置
- 根据飞行模式和指令计算控制输出
- 驱动舵机/电机执行控制

## ArduPilot 简介

ArduPilot 是目前最流行的开源飞控系统之一：
- **开源免费**：代码完全开放
- **功能强大**：支持多种机型
- **社区活跃**：大量文档和支持
- **硬件兼容**：支持多种飞控硬件

### ArduPilot 支持的机型
- **ArduPlane**：固定翼飞机（我们学习的重点）
- **ArduCopter**：多旋翼/直升机
- **ArduRover**：地面车辆/船
- **ArduSub**：水下机器人

---

## 固定翼飞机基础

### 基本组成

```
           机翼（Wing）
              ____
             /    \
机身（Fuselage）→ |====|←←← 尾翼（Tail）
             \____/
              电机
           （Motor）
```

### 控制面
1. **副翼（Aileron）**：控制横滚
2. **升降舵（Elevator）**：控制俯仰
3. **方向舵（Rudder）**：控制偏航
4. **油门（Throttle）**：控制动力

### 三轴运动
- **横滚（Roll）**：绕机身轴旋转，左右倾斜
- **俯仰（Pitch）**：绕机翼轴旋转，抬头低头
- **偏航（Yaw）**：绕垂直轴旋转，左右转向

---

## 飞控传感器

### 必需传感器
| 传感器 | 作用 |
|--------|------|
| 加速度计 | 测量加速度，计算姿态 |
| 陀螺仪 | 测量角速度，计算姿态变化率 |
| 气压计 | 测量气压，估算高度 |

### 常用传感器
| 传感器 | 作用 |
|--------|------|
| GPS | 定位，测速 |
| 罗盘（磁力计）| 测量航向 |
| 空速计 | 测量相对空速 |

---

## PID 控制基础

PID 是飞控最核心的控制算法：

- **P（比例）**：误差越大，输出越大
- **I（积分）**：消除稳态误差
- **D（微分）**：抑制震荡，预测趋势

### 简单理解

假设你要让飞机保持水平：

```
当前姿态 → 计算误差 → PID计算 → 舵机输出 → 姿态改变
    ↑                                          |
    └──────────────────────────────────────────┘
                    反馈回路
```

---

## 坐标系

### 机体坐标系（Body Frame）
- 原点：飞机重心
- X轴：机头方向
- Y轴：右翼方向
- Z轴：向下

### 地理坐标系（NED）
- N（North）：北
- E（East）：东
- D（Down）：下

---

## 学习建议

作为入门者，建议：
1. 先不要深究原理，理解概念即可
2. 通过 Mission Planner 实际操作来加深理解
3. 遇到不懂的参数，结合这些基础知识来理解
