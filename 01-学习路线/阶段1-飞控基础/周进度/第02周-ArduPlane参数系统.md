# 第 2 周学习记录 - ArduPlane 参数系统

> 阶段 1 · 第 1 个月 · 第 2 周
> 日期：2026-01-26（周一）至 2026-01-30（周五）
> 周末休息

---

## 本周目标

**核心产出**：《核心参数速查表》+ 调参日志

| 检查项 | 完成 |
|--------|------|
| [ ] 《核心参数速查表》完成 | |
| [ ] 包含 PID / TECS / 导航 / 安全 四大类参数 | |
| [ ] 在 SITL 中完成至少 3 次调参实验 | |
| [ ] 调参日志记录完整（参数名、修改前后值、飞行表现） | |
| [ ] 理解参数对飞行行为的影响 | |

---

## 学习背景

第一周已经在《功能手册》第5章初步学习了参数系统结构，本周将：
1. 深入理解核心参数的作用
2. 在 SITL 中实际调参并观察效果
3. 形成可复用的参数速查表

---

## 每日计划与记录

### 周一 1/26 - PID 参数深入

**任务**：
- 理解 PID 控制在固定翼中的作用
- 学习 Roll/Pitch/Yaw PID 参数
- 在 SITL 中观察 PID 参数对飞行的影响

**重点参数**：
| 参数前缀 | 作用 | 关键参数 |
|----------|------|----------|
| `RLL2SRV_` | 滚转控制 | P, I, D, IMAX |
| `PTCH2SRV_` | 俯仰控制 | P, I, D, IMAX |
| `YAW2SRV_` | 偏航控制 | SLIP, INT, DAMP |

**学习方法**：
1. 在 Full Parameter List 搜索上述参数
2. 记录默认值
3. 小幅修改 P 值（±20%），观察响应变化
4. 记录修改前后的飞行表现

**产出**：PID 参数笔记 + 调参日志条目

**记录**：
```
学习时长：6 小时
完成情况：
1. 深度学习《小型无人机理论与控制》第4章：气动力系数、静/动稳定性导数、Sigmoid 混合升力模型及二次阻力模型。
2. 建立 PID 参数与物理力矩映射：P 对应恢复力矩（稳定性导数效能），D 对应阻尼（阻尼导数效能）。
3. SITL 实战：通过 Tuning 窗口观察红绿线追逐，完成“极低响应（P=0.08）”与“系统崩溃（RATE P=2.0）”对比实验。
4. 产出《07-PID参数实战指南.md》，包含三轴参数清单与 3 类典型案例分析（阶梯响应、欠阻尼超调、传感器失效保护）。
遇到问题：
1. 实验初期由于 I 项干扰掩盖了低 P 响应，通过隔离参数（I/D 设为 0）解决。
2. 极高增益导致空速计 1 失效报错，确认了飞控一致性检查保护机制。
```

---

### 周二 1/27 - TECS 参数（纵向控制）

**任务**：
- 理解 TECS（总能量控制系统）原理
- 学习爬升、下降、空速控制参数
- 在 SITL 中调整 TECS 参数

**重点参数**：
| 参数 | 作用 | 默认值 |
|------|------|--------|
| `TECS_CLMB_MAX` | 最大爬升率 | 5 m/s |
| `TECS_SINK_MIN` | 最小下降率 | 2 m/s |
| `TECS_SINK_MAX` | 最大下降率 | 5 m/s |
| `TECS_TIME_CONST` | 时间常数 | 5 s |
| `TECS_PITCH_MAX` | 最大俯仰角 | 25° |
| `TECS_PITCH_MIN` | 最小俯仰角 | -25° |

**实验任务**：
1. 创建一条包含爬升和下降的航线
2. 修改 `TECS_CLMB_MAX`，观察爬升速度变化
3. 修改 `TECS_SINK_MAX`，观察下降速度变化

**学习指南（简版）**：
1. 按 `docs/04-ArduPlane参数/08-TECS参数实战指南.md` 完成准备与航线规划
2. 先记录默认参数与基线飞行表现
3. 分别只改动一项参数，记录爬升/下降与俯仰变化
4. 截图并写入调参日志

**产出**：TECS 参数笔记 + 调参日志条目

**记录**：
```
学习时长：__ 小时
完成情况：
遇到问题：
```

---

### 周三 1/28 - 导航参数（L1 控制器）

**任务**：
- 理解 L1 导航控制器原理
- 学习航点到达、转弯、盘旋相关参数
- 在 SITL 中调整导航参数

**重点参数**：
| 参数 | 作用 | 默认值 |
|------|------|--------|
| `NAVL1_PERIOD` | L1 周期 | 15 s |
| `NAVL1_DAMPING` | L1 阻尼 | 0.75 |
| `WP_RADIUS` | 航点到达半径 | 90 m |
| `WP_LOITER_RAD` | 盘旋半径 | 60 m |
| `LIM_ROLL_CD` | 最大滚转角 | 6500 (65°) |

**实验任务**：
1. 创建一条有急转弯与盘旋的航线
2. 修改 `NAVL1_PERIOD`，观察转弯半径变化
3. 修改 `NAVL1_DAMPING`，观察过冲/振荡变化
4. 修改 `WP_LOITER_RAD`，观察盘旋半径变化
5. 修改 `WP_RADIUS` 或 `LIM_ROLL_CD`，观察切航段时机或最大滚转限制

**产出**：导航参数笔记 + 调参日志条目
**参考指南**：`../../04-ArduPlane参数/09-导航参数实战指南.md`

**记录**：
```
学习时长：__ 小时
完成情况：已完成 L1 参数基线与 1/2/3/4/5 实验记录
遇到问题：参数五在当前固件中显示为 `ROLL_LIMIT_DEG`（等价于 `LIM_ROLL_CD`）
```

---

### 周四 1/29 - 安全与限制参数

**任务**：
- 学习飞行限制参数（速度、高度、角度）
- 学习故障保护参数
- 理解 ARMING_CHECK 解锁检查

**重点参数**：
| 参数 | 作用 | 默认值 |
|------|------|--------|
| `ARSPD_FBW_MIN` | FBW 最小空速 | 10 m/s |
| `ARSPD_FBW_MAX` | FBW 最大空速 | 30 m/s |
| `ALT_HOLD_RTL` | RTL 盘旋高度 | 100 m |
| `FENCE_ENABLE` | 围栏使能 | 0 |
| `FS_SHORT_ACTN` | 短时失控动作 | 0 |
| `FS_LONG_ACTN` | 长时失控动作 | 0 |
| `ARMING_CHECK` | 解锁检查项 | 1 (全部) |

**学习指南（今日执行）**：
1. **先读参数逻辑**：区分“飞行限制”（速度/高度/角度）与“故障保护”（失控与围栏）。
2. **实验 1（RTL 高度）**：记录基线高度 → 将 `ALT_HOLD_RTL` 改为 80 → 再次触发 RTL → 记录高度变化。
3. **实验 2（围栏）**：`FENCE_ENABLE=1` → 执行跨界动作 → 记录触发行为与告警信息。
4. **实验 3（解锁检查）**：查看 `ARMING_CHECK` 各位含义 → 记录哪些检查会导致无法解锁。
5. **结论模板**：限制参数用于“边界约束”，故障参数用于“保护策略”，解锁检查用于“上电前风险过滤”。

**实验任务**：
1. 修改 `ALT_HOLD_RTL` 为 80，观察 RTL 高度变化
2. 启用 `FENCE_ENABLE`，测试围栏触发行为
3. 了解 `ARMING_CHECK` 各位含义

**产出**：安全参数笔记 + 调参日志条目
**参考指南**：`../../04-ArduPlane参数/10-安全与限制参数实战指南.md`

**记录**：
```
学习时长：__ 小时
完成情况：
遇到问题：
```

---

### 周五 1/30 - 整理速查表 + 综合调参

**任务**：
- 整理本周所学参数，完成《核心参数速查表》
- 进行一次综合调参飞行
- 整理调参日志

**产出要求**：
1. 《核心参数速查表》包含 4 大类参数
2. 调参日志至少 3 次实验记录
3. 每次实验包含：参数名、修改前值、修改后值、飞行表现

**记录**：
```
学习时长：__ 小时
完成情况：
遇到问题：
```

---

### 周六 1/31 & 周日 2/1 - 休息

休息日，可选择性复习或阅读书籍

---

## 本周产出物

### 1. 核心参数速查表

存放位置：`docs/04-ArduPlane参数/核心参数速查表.md`

**目录结构**：
```
# ArduPlane 核心参数速查表

## 1. PID 控制参数
### 1.1 滚转控制 (RLL2SRV_)
### 1.2 俯仰控制 (PTCH2SRV_)
### 1.3 偏航控制 (YAW2SRV_)

## 2. TECS 参数（纵向控制）
### 2.1 爬升/下降
### 2.2 空速控制

## 3. 导航参数
### 3.1 L1 控制器
### 3.2 航点参数

## 4. 安全与限制
### 4.1 飞行限制
### 4.2 故障保护
### 4.3 解锁检查

## 附录：调参经验总结
```

### 2. 调参日志

存放位置：`docs/06-实践记录/调参日志/第02周-参数调试.md`

**日志模板**：
```
### 实验 X：[实验名称]

**日期**：2026-01-XX
**目的**：[实验目的]

**参数修改**：
| 参数名 | 修改前 | 修改后 |
|--------|--------|--------|
| XXX | 0.3 | 0.5 |

**飞行任务**：[简述航线]

**观察结果**：
- [具体表现变化]

**结论**：
- [总结]
```

---

## 本周学习资源

### 官方文档
- 参数列表：https://ardupilot.org/plane/docs/parameters.html
- TECS 说明：https://ardupilot.org/plane/docs/tecs-total-energy-control-system-for-speed-height-tuning-guide.html
- L1 控制器：https://ardupilot.org/plane/docs/navigation-tuning.html

### 参考资料
- 第一周《功能手册》第5章 参数配置界面
- ArduPilot 源码（参数定义位置）

---

## 参数学习方法论

### 1. 三步学习法
```
理解原理 → SITL 实验 → 记录总结
    ↓           ↓           ↓
  看文档    小幅修改    写调参日志
```

### 2. 调参安全原则
- 每次只改 1-2 个参数
- 改动幅度控制在 ±20% 以内
- 修改前先备份参数（Compare Params → Save）
- 在 SITL 中验证后再用于真机

### 3. 参数命名规则
```
模块_功能_子项
  │     │    │
  │     │    └─ 具体参数（如 P/I/D/MAX）
  │     └────── 控制对象（如 ROLL/PITCH）
  └──────────── 系统模块（如 RLL2SRV/TECS）
```

---

## 周总结（周六填写）

### 完成情况
- [ ] 《核心参数速查表》
- [ ] 调参日志（≥3 次实验）
- [ ] 理解参数影响

### 主要收获
1.
2.
3.

### 遇到的问题
1.
2.

### 对下周的建议
-

### 自我评价

| 项目 | 评分(1-5) |
|------|-----------|
| 产出质量 | |
| 学习效率 | |
| 理解深度 | |

---

*第2周学习记录 - 待完成*
