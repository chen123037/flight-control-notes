1. 测试背景
欧拉角：用滚转、俯仰、偏航三个角度来描述姿态，但在俯仰角接近 ±90° 时会出现 “万向锁”，导致计算失效。
四元数：用四个复数来描述姿态，不存在万向锁问题，是飞控系统中更常用的姿态表示方法。
这次仿真在 2–4 秒时（黄色高亮区）给升降舵一个 - 10° 的指令，让飞机持续低头，模拟接近 “万向锁” 的极端姿态，来对比两种方法的表现。
2. 图表解读
📍 位置对比（Position Comparison）
蓝色 / 红色线（北向位置 pn）几乎完全重合，绿色 / 紫色线（高度 h）也几乎完全重合。
说明：在姿态未进入极端情况前，两种方法计算出的位置轨迹几乎没有区别。
📈 俯仰角对比（Pitch Angle Comparison）
在 0–4 秒（黄色区），四元数（蓝色线）和欧拉角（红色线）的俯仰角曲线几乎完全重合。
在 4 秒后，飞机俯仰角接近 - 90°（机头向下垂直俯冲），欧拉角曲线（红色线）继续向 - 100° 下降，而四元数曲线（蓝色线）开始出现偏离，这正是欧拉角进入 “万向锁” 状态的信号。
说明：在极端俯仰姿态下，欧拉角的计算开始出现异常，而四元数仍能保持稳定。
📊 位置与速度差异（Position & Velocity Difference）
蓝色线（位置差异）和橙色线（速度差异）的数值都非常小（位置差异在 10⁻³ 米量级，速度差异在 10⁻⁹ m/s 量级）。
说明：在姿态未进入极端情况前，两种方法的计算结果差异可以忽略不计。
📊 角度与角速度差异（Angle & Rate Difference）
在 0–4 秒，角度和角速度的差异都非常小（10⁻⁸° 量级）。
在 4 秒后，当飞机俯仰角接近 - 90° 时，角度差异（蓝色线）突然跳升至 10⁻¹° 量级，而角速度差异（橙色线）变化不大。
说明：这一跳跃直接反映了欧拉角在 “万向锁” 状态下的计算失效，而四元数仍能保持稳定。
3. 核心结论
正常姿态下表现一致：在飞机姿态远离 ±90° 俯仰角时，四元数和欧拉角的计算结果几乎没有差异。
极端姿态下四元数更可靠：当飞机俯仰角接近 - 90° 时，欧拉角会出现 “万向锁” 问题，导致姿态计算异常，而四元数仍能保持稳定。
四元数是飞控的首选：这一结果验证了四元数在处理极端姿态时的优势，解释了为什么现代飞控系统普遍采用四元数来表示姿态。